# TG_bot_sum
https://g.co/gemini/share/d46e1c9652ca описание команд

# Telegram Бот: Описание Команд

Этот документ описывает команды и функционал Telegram бота.

## Команды Бота

Ниже представлен список команд, которые доступны в боте, с кратким описанием их функций.

* `/start`

  * **Описание:** Приветственное сообщение при первом запуске бота или в приватном чате.

  * **Использование:** Отправьте команду `/start`.

* `/run_info`

  * **Описание:** Показывает дату и время запуска бота.

  * **Использование:** Отправьте команду `/run_info`.

* `/right`

  * **Описание:** Проверяет права бота или пользователя (если команда отправлена в ответ на сообщение пользователя) в текущем чате. Помогает убедиться, что у бота или пользователя достаточно прав для выполнения определенных действий (например, для суммаризации).

  * **Использование:** Отправьте команду `/right`. Чтобы проверить права конкретного пользователя, ответьте этой командой на его сообщение.

* `/sum [количество] [смещение]`

  * **Описание:** Суммаризирует последние сообщения в групповом чате с помощью Gemini. По умолчанию суммаризируются новые сообщения с момента последнего свода. Можно указать количество сообщений для суммаризации и смещение от конца истории.

  * **Параметры:**

    * `[количество]` (необязательно): Число сообщений для суммаризации (от 150 до 2000). По умолчанию используется около 200 новых сообщений.

    * `[смещение]` (необязательно): Количество сообщений, которые нужно пропустить с конца истории перед началом суммаризации.

  * **Использование:**

    * `/sum` (суммаризировать новые сообщения)

    * `/sum 300` (суммаризировать последние 300 сообщений)

    * `/sum 500 100` (суммаризировать 500 сообщений, начиная со 101-го с конца истории)

  * **Примечание:** Работает только в групповых чатах. Требует одобрения администратора для использования пользователем.

* `/анекдот [тема]`

  * **Описание:** Генерирует короткий анекдот с помощью Gemini. Можно указать тему для анекдота. Если тема не указана, анекдот будет основан на последних сообщениях чата.

  * **Параметры:**

    * `[тема]` (необязательно): Тема для анекдота.

  * **Использование:**

    * `/анекдот` (анекдот по переписке)

    * `/анекдот про котов` (анекдот про котов)

* `/top_u [тип] [количество] [формат]`

  * **Описание:** Показывает топ пользователей чата по различным критериям.

  * **Параметры:**

    * `[тип]` (обязательно): Тип топа. Используйте:

      * `m` - по количеству сообщений

      * `c` - по количеству символов

      * `b` - по количеству "баянов" (повторяющихся картинок/видео)

    * `[количество]` (необязательно): Число пользователей в топе (по умолчанию 10).

    * `[формат]` (необязательно): Формат вывода. Используйте:

      * `t` - текстовая таблица

      * (любое другое или ничего) - изображение

  * **Использование:**

    * `/top_u m` (топ-10 по сообщениям, изображение)

    * `/top_u c 5` (топ-5 по символам, изображение)

    * `/top_u b 20 t` (топ-20 по баянам, текстовая таблица)

* `/hello_m [текст приветствия]`

  * **Описание:** Устанавливает текст приветственного сообщения для новых участников чата. В тексте можно использовать `FNAME`, который будет заменен на полное имя нового участника.

  * **Параметры:**

    * `[текст приветствия]` (обязательно): Текст сообщения.

  * **Использование:** `/hello_m Привет, FNAME! Добро пожаловать в чат!`

  * **Примечание:** Доступна только администраторам чата.

## Функционал для Администраторов

### Обработка запросов на доступ к `/sum`

Администраторы получают уведомления о запросах пользователей на доступ к команде `/sum` и могут управлять ими с помощью inline-кнопок.

* `✅ Одобрить` (кнопка)

  * **Описание:** Одобряет запрос пользователя на доступ к команде `/sum`.

  * **Использование:** Нажать кнопку "Одобрить" под сообщением о новом запросе.

* `❌ Отклонить` (кнопка)

  * **Описание:** Отклоняет запрос пользователя на доступ к команде `/sum`.

  * **Использование:** Нажать кнопку "Отклонить" под сообщением о новом запросе.

### Проверка новых участников

Когда новый участник присоединяется к чату, бот временно ограничивает его возможность отправлять сообщения и просит пройти проверку.

* **Проверка для пользователей (не ботов):**

  * **Описание:** Бот отправляет приветственное сообщение с просьбой ответить на него картинкой велосипеда. Если Gemini определяет велосипед на картинке, бот снимает ограничения с пользователя.

  * **Действие пользователя:** Ответить на приветственное сообщение бота картинкой, на которой изображен велосипед.

* **Проверка для администраторов (для новых участников, включая ботов):**

  * **Описание:** Если новый участник не прошел проверку картинкой (или является ботом), администратор может вручную принять решение, ответив на приветственное сообщение бота.

  * **Действия администратора (ответ на сообщение бота):**

    * Отправить текст `Принят!` чтобы снять ограничения с участника.

    * Отправить текст `Бан!` чтобы заблокировать участника в чате.
